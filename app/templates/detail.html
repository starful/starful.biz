{% extends "base.html" %}

{% block head %}
<title>{{ item.title }} | Starful キャリア情報</title>
<meta name="description" content="{{ item.meta_description }}">
<!-- 詳細ページ専用CSSを読み込みます -->
<link rel="stylesheet" href="/static/css/detail.css?v=1.0"> 
{% endblock %}

<!-- ✨ [SEO] 상세 페이지용 오픈 그래프 태그 설정 -->
{% block og_title %}{{ item.title }} | Starful{% endblock %}
{% block og_description %}{{ item.meta_description }}{% endblock %}
{% if item.hero_image and item.hero_image != '/static/img/default_hero.jpg' %}
{% block og_image %}{{ request.url.scheme }}://{{ request.url.netloc }}{{ item.hero_image }}{% endblock %}
{% endif %}

<!-- ✨ [SEO] 직업 정보에 대한 구조화된 데이터(JSON-LD) 추가 -->
{% block structured_data %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Occupation",
  "name": "{{ item.title }}",
  "description": "{{ item.meta_description }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ request.url }}"
  },
  "image": "{{ self.og_image() }}",
  "keywords": "{{ item.keywords | join(', ') if item.keywords else item.title }}"
}
</script>
{% endblock %}


<!-- bodyに専用クラスを追加 -->
{% block body_class %}detail-page{% endblock %}

{% block content %}
<!-- Detail Hero Section -->
<header class="detail-hero fade-in-element">
    {% if item.hero_image and item.hero_image != '/static/img/default_hero.jpg' and item.hero_image != '/static/img/placeholder.jpg' %}
    <img src="{{ item.hero_image }}" alt="{{ item.title }}" class="hero-bg-img" loading="lazy">
    <div class="hero-overlay"></div>
    {% else %}
    <!-- hero_imageがない場合は、CSSで設定された背景色を使用 -->
    {% endif %}

    <div class="content-wrapper">
        <a href="/category/{{ item.category }}" class="back-link"><i class="fa-solid fa-arrow-left"></i> {{ item.category_title }}一覧に戻る</a>
        <h1>{{ item.title }}</h1>
        <p>{{ item.meta_description }}</p>
    </div>
</header>

<main class="detail-container">
    <!-- Summary Box -->
    <div class="summary-box fade-in-element">
        <h3><i class="fa-solid fa-lightbulb" style="color: var(--accent);"></i> このガイドで学べること</h3>
        <ul>
            <li><i class="fa-solid fa-check"></i> 職務の主な役割と責任範囲</li>
            <li><i class="fa-solid fa-check"></i> 必要とされる専門スキルとキャリアパス</li>
            <li><i class="fa-solid fa-check"></i> 将来性と面接で問われる重要ポイント</li>
        </ul>
    </div>

    <!-- Markdown Content -->
    <article class="markdown-content fade-in-element">
        {{ content | safe }}
    </article>

    <!-- Related Jobs Section -->
    <section class="related-jobs-section fade-in-element">
        <h2>関連性の高いキャリア</h2>
        <div class="related-jobs-container">
            {% if related_jobs_data %}
                {% for job in related_jobs_data %}
                    <a href="/career/{{ job.id }}" class="related-job-card">
                        <h3>{{ job.title }}</h3>
                        <p>{{ job.description }}</p>
                    </a>
                {% endfor %}
            {% else %}
                <p style="grid-column: 1 / -1; text-align: center; color: var(--text-sub); font-size: 1.1rem; padding: 20px;">
                    関連キャリアはまだありません。
                </p>
            {% endif %}
        </div>
    </section>
</main>

<script>
// 詳細ページのJavaScriptは変更なし（アコーディオン・タブ機能は現在のマークダウンにはないため）
</script>
{% endblock %}